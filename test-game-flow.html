<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Flow Test</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #1a1a1a; color: white; }
        .test { margin: 20px 0; padding: 15px; border: 1px solid #444; border-radius: 8px; }
        .success { background: #1e3a1e; border-color: #4ade80; }
        .error { background: #3a1e1e; border-color: #f87171; }
        .info { background: #1e1e3a; border-color: #60a5fa; }
        iframe { width: 100%; height: 800px; border: 1px solid #444; border-radius: 8px; }
        .step { background: #2a2a2a; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #3b82f6; }
        .console { background: #000; color: #00ff00; padding: 15px; border-radius: 8px; font-family: monospace; height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>🧩 Game Flow Test - Fix Puzzle Generation</h1>
    
    <div class="test info">
        <h3>🔍 Debugging Puzzle Generation Issue</h3>
        <p>The app is running but shows "No puzzles available" when starting a game.</p>
        <p>I've added debugging to track the puzzle generation flow.</p>
    </div>

    <div class="test info">
        <h3>🧪 Test Steps (Follow These Exactly):</h3>
        
        <div class="step">
            <h4>Step 1: Open Browser Console</h4>
            <p>Press F12 → Console tab to see debug logs</p>
        </div>
        
        <div class="step">
            <h4>Step 2: Create a Game</h4>
            <p>Click "Create New Game" → Fill out form → Click "Create Game"</p>
            <p>Watch console for: "🎮 Creating game:" and "✅ Game created"</p>
        </div>
        
        <div class="step">
            <h4>Step 3: Join the Game</h4>
            <p>Click "Quick Join" on your created game</p>
            <p>Watch console for: "👥 Joining game:" and "✅ Player joined game"</p>
        </div>
        
        <div class="step">
            <h4>Step 4: Start the Game</h4>
            <p>Click "Start Game" button</p>
            <p>Watch console for: "🎮 Starting game:" and "🧩 Generated puzzles:"</p>
        </div>
        
        <div class="step">
            <h4>Step 5: Check PuzzleGame Component</h4>
            <p>Watch console for: "🧩 PuzzleGame mounted with gameData:"</p>
            <p>Look for: "📊 Puzzles count:" and "🔍 Current puzzles array:"</p>
        </div>
    </div>

    <div class="test info">
        <h3>🎮 Live App Test</h3>
        <p>Follow the steps above while watching the console:</p>
        <iframe id="app-frame" src="http://localhost:3000"></iframe>
    </div>

    <div class="test info">
        <h3>📊 Console Output (Copy Here)</h3>
        <p>After following the steps, copy the console output here:</p>
        <div class="console" id="console-output">
            Console output will appear here after testing...
        </div>
        <button onclick="clearConsole()">Clear Console</button>
    </div>

    <div class="test success">
        <h3>🎯 Expected Results:</h3>
        <ul>
            <li>✅ Game creation should show "🎮 Creating game:"</li>
            <li>✅ Game joining should show "👥 Joining game:"</li>
            <li>✅ Game start should show "🎮 Starting game:" and "🧩 Generated puzzles:"</li>
            <li>✅ PuzzleGame should show "🧩 PuzzleGame mounted with gameData:"</li>
            <li>✅ Puzzles count should be > 0</li>
        </ul>
    </div>

    <script>
        // Clear console function
        function clearConsole() {
            document.getElementById('console-output').innerHTML = 'Console cleared...';
        }

        // Check if app is running
        async function checkAppStatus() {
            try {
                const response = await fetch('http://localhost:3000');
                if (response.ok) {
                    console.log('✅ App is running on localhost:3000');
                } else {
                    console.log('❌ App responded with status:', response.status);
                }
            } catch (error) {
                console.log('❌ Cannot connect to app:', error.message);
            }
        }

        // Check status on load
        window.onload = checkAppStatus;
    </script>
</body>
</html>
